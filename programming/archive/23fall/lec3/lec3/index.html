<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="浙江大学竺可桢学院辅学计划站点" name="description"/>
<meta content="竺可桢学院学业指导中心" name="author"/>
<link href="https://ckc-agc.bowling233.top/programming/archive/23fall/lec3/lec3/" rel="canonical"/>
<link href="../pre/" rel="prev"/>
<link href="../../lec4/lec4/" rel="next"/>
<link href="../../../../../graph/ckc.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.48" name="generator"/>
<title>讲义：I/O 与文件 - 浙江大学竺可桢学院辅学计划站点</title>
<link href="../../../../../assets/stylesheets/main.6f8fc17f.min.css" rel="stylesheet"/>
<link href="../../../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../../../css/heti.css" rel="stylesheet"/>
<link href="../../../../../stylesheets/neoteroi-mkdocs.css" rel="stylesheet"/>
<link href="../../../../../stylesheets/custom.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#io">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="浙江大学竺可桢学院辅学计划站点" class="md-header__button md-logo" data-md-component="logo" href="../../../../.." title="浙江大学竺可桢学院辅学计划站点">
<img alt="logo" src="../../../../../graph/ckc.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            浙江大学竺可桢学院辅学计划站点
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              讲义：I/O 与文件
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/ckc-agc/study-assist" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    浙江大学竺可桢学院辅学计划站点
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../..">
          
  
    
  
  首页

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../calculus/">
          
  
    
  
  微积分

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../analysis/">
          
  
    
  
  数学分析

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../algebra/">
          
  
    
  
  线性代数

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../../../">
          
  
    
  
  程序设计

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../chemistry/">
          
  
    
  
  普通化学

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../physics/">
          
  
    
  
  普通物理学

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../../other/">
          
  
    
  
  其他资源

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="浙江大学竺可桢学院辅学计划站点" class="md-nav__button md-logo" data-md-component="logo" href="../../../../.." title="浙江大学竺可桢学院辅学计划站点">
<img alt="logo" src="../../../../../graph/ckc.png"/>
</a>
    浙江大学竺可桢学院辅学计划站点
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/ckc-agc/study-assist" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    浙江大学竺可桢学院辅学计划站点
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../..">
<span class="md-ellipsis">
    首页
  </span>
</a>
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            首页
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../test/">
<span class="md-ellipsis">
    测试
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../contribute/">
<span class="md-ellipsis">
    贡献
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../senior/">
<span class="md-ellipsis">
    辅学学长须知
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../../calculus/">
<span class="md-ellipsis">
    微积分
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            微积分
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../../analysis/">
<span class="md-ellipsis">
    数学分析
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            数学分析
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../../algebra/">
<span class="md-ellipsis">
    线性代数
  </span>
</a>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            线性代数
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../algebra/2023/">
<span class="md-ellipsis">
    2023-2024 学年线代辅学
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../algebra/2024/">
<span class="md-ellipsis">
    2024-2025 学年线代辅学
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../../algebra/lalu/">
<span class="md-ellipsis">
    线性代数：未竟之美
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../">
<span class="md-ellipsis">
    程序设计
  </span>
</a>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            程序设计
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../24fall/">
<span class="md-ellipsis">
    （24 秋冬）程设辅学
  </span>
</a>
<label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_5_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
            （24 秋冬）程设辅学
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../24fall/lec1/">
<span class="md-ellipsis">
    第一讲：编程入门
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../24fall/lec2/">
<span class="md-ellipsis">
    第二讲：通往 Pro 的第一步
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../24fall/lec3/">
<span class="md-ellipsis">
    第三讲：开源世界生存基础
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../24fall/lec4/">
<span class="md-ellipsis">
    第四讲：如何写出简洁工整的报告
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../24fall/lec5/">
<span class="md-ellipsis">
    第五讲：期末复习（上）
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../24fall/lec6/">
<span class="md-ellipsis">
    第六讲：期末复习（下）
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="">
<span class="md-ellipsis">
    通用资料
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_3">
<span class="md-nav__icon md-icon"></span>
            通用资料
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_3_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../common/exam/">
<span class="md-ellipsis">
    历年卷
  </span>
</a>
<label class="md-nav__link" for="__nav_5_3_1" id="__nav_5_3_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_5_3_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_5_3_1">
<span class="md-nav__icon md-icon"></span>
            历年卷
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../common/exam/exam/">
<span class="md-ellipsis">
    历年卷经典题目解析
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_3_2" id="__nav_5_3_2_label" tabindex="0">
<span class="md-ellipsis">
    每日一题
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_3_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_5_3_2">
<span class="md-nav__icon md-icon"></span>
            每日一题
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../common/daily/2023/">
<span class="md-ellipsis">
    2023-2024
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_3_3" id="__nav_5_3_3_label" tabindex="0">
<span class="md-ellipsis">
    专题笔记
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_3_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_5_3_3">
<span class="md-nav__icon md-icon"></span>
            专题笔记
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../common/notes/pointers/">
<span class="md-ellipsis">
    指针概览
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../common/notes/funcptr/">
<span class="md-ellipsis">
    函数指针认读
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../common/faq/">
<span class="md-ellipsis">
    常见问题
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_5_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="">
<span class="md-ellipsis">
    归档
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_5_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_4">
<span class="md-nav__icon md-icon"></span>
            归档
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="https://slides.tonycrane.cc/PracticalSkillsTutorial/2023-fall-ckc/#/">
<span class="md-ellipsis">
    （23 秋冬）实用技能拾遗
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_5_4_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    （23 秋冬）系统知识拾遗
  </span>
</a>
<label class="md-nav__link" for="__nav_5_4_2" id="__nav_5_4_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_5_4_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_5_4_2">
<span class="md-nav__icon md-icon"></span>
            （23 秋冬）系统知识拾遗
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_4_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4_2_2" id="__nav_5_4_2_2_label" tabindex="0">
<span class="md-ellipsis">
    1. 程序编译过程与调试技术
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_4_2_2_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_5_4_2_2">
<span class="md-nav__icon md-icon"></span>
            1. 程序编译过程与调试技术
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../lec1/pre/">
<span class="md-ellipsis">
    课前：准备开发与调试环境
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../lec1/lec1/">
<span class="md-ellipsis">
    讲义：程序编译过程与调试技术
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_4_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4_2_3" id="__nav_5_4_2_3_label" tabindex="0">
<span class="md-ellipsis">
    2. 类型系统与内存模型
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_4_2_3_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_5_4_2_3">
<span class="md-nav__icon md-icon"></span>
            2. 类型系统与内存模型
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../lec2/pre/">
<span class="md-ellipsis">
    课前：MAGIC 函数
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../lec2/lec2/">
<span class="md-ellipsis">
    讲义：C 语言的类型系统与内存模型
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_5_4_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4_2_4" id="__nav_5_4_2_4_label" tabindex="0">
<span class="md-ellipsis">
    3. I/O 与文件
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_5_4_2_4_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_5_4_2_4">
<span class="md-nav__icon md-icon"></span>
            3. I/O 与文件
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../pre/">
<span class="md-ellipsis">
    课前：一些样例
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    讲义：I/O 与文件
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    讲义：I/O 与文件
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#c">
<span class="md-ellipsis">
      C 的输入输出模型
    </span>
</a>
<nav aria-label="C 的输入输出模型" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
<span class="md-ellipsis">
      缓冲
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      流
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
<span class="md-ellipsis">
      标准流
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
<span class="md-ellipsis">
      字符输入输出
    </span>
</a>
<nav aria-label="字符输入输出" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
<span class="md-ellipsis">
      重定向
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
<span class="md-ellipsis">
      无格式输入/输出
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
<span class="md-ellipsis">
      格式化输入输出
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_9">
<span class="md-ellipsis">
      实例
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_12">
<span class="md-ellipsis">
      文件编码与文件输入输出
    </span>
</a>
<nav aria-label="文件编码与文件输入输出" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_13">
<span class="md-ellipsis">
      基础概念
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_17">
<span class="md-ellipsis">
      流和文件
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_18">
<span class="md-ellipsis">
      类型和宏
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_19">
<span class="md-ellipsis">
      函数
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_4_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4_2_5" id="__nav_5_4_2_5_label" tabindex="0">
<span class="md-ellipsis">
    4. C 标准库
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_4_2_5_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_5_4_2_5">
<span class="md-nav__icon md-icon"></span>
            4. C 标准库
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../lec4/lec4/">
<span class="md-ellipsis">
    简明 C 标准库
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../lec4/after/">
<span class="md-ellipsis">
    课后扩展：C 标准库的实现
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_4_2_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4_2_6" id="__nav_5_4_2_6_label" tabindex="0">
<span class="md-ellipsis">
    5. 期末重点知识复习
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_4_2_6_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_5_4_2_6">
<span class="md-nav__icon md-icon"></span>
            5. 期末重点知识复习
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../lec5/lec5/">
<span class="md-ellipsis">
    指针及链表相关知识点复习
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../../chemistry/">
<span class="md-ellipsis">
    普通化学
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            普通化学
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../../physics/">
<span class="md-ellipsis">
    普通物理学
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            普通物理学
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../../other/">
<span class="md-ellipsis">
    其他资源
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            其他资源
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#c">
<span class="md-ellipsis">
      C 的输入输出模型
    </span>
</a>
<nav aria-label="C 的输入输出模型" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
<span class="md-ellipsis">
      缓冲
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
<span class="md-ellipsis">
      流
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
<span class="md-ellipsis">
      标准流
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_4">
<span class="md-ellipsis">
      字符输入输出
    </span>
</a>
<nav aria-label="字符输入输出" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_5">
<span class="md-ellipsis">
      重定向
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_6">
<span class="md-ellipsis">
      无格式输入/输出
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_7">
<span class="md-ellipsis">
      格式化输入输出
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_9">
<span class="md-ellipsis">
      实例
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_12">
<span class="md-ellipsis">
      文件编码与文件输入输出
    </span>
</a>
<nav aria-label="文件编码与文件输入输出" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_13">
<span class="md-ellipsis">
      基础概念
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_17">
<span class="md-ellipsis">
      流和文件
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_18">
<span class="md-ellipsis">
      类型和宏
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_19">
<span class="md-ellipsis">
      函数
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/ckc-agc/study-assist/tree/master/docs/programming/archive/23fall/lec3/lec3.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"></path></svg>
</a>
<h1 id="io">讲义：<span>I/O<span class="heti-spacing"> </span></span>与文件<a class="headerlink" href="#io" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h1>
<div class="admonition abstract">
<p class="admonition-title">内容提要</p>
<ul>
<li><span>C<span class="heti-spacing"> </span></span>的输入输出模型：缓冲与流的概念</li>
<li><span>C<span class="heti-spacing"> </span></span>标准<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>函数</li>
<li>文件编码与文件输入输出</li>
</ul>
</div>
<h2 id="c"><span>C<span class="heti-spacing"> </span></span>的输入输出模型<a class="headerlink" href="#c" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<h3 id="_1">缓冲<a class="headerlink" href="#_1" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>广义的缓冲区是内存空间的一部分，在内存中预留了一定的存储空间，用来暂时保存输入和输出等<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>操作的一些数据，这些预留的空间就叫做缓冲区；而<span class="heti-skip"><span class="heti-spacing"> </span>buffer<span class="heti-spacing"> </span></span>缓冲区和<span class="heti-skip"><span class="heti-spacing"> </span>Cache<span class="heti-spacing"> </span></span>缓存区都属于缓冲区的一种。</p>
<div class="admonition note">
<p class="admonition-title"><span>buffer<span class="heti-spacing"> </span></span>缓冲区和<span class="heti-skip"><span class="heti-spacing"> </span>cache<span class="heti-spacing"> </span></span>缓存区</p>
<ul>
<li><span>buffer<span class="heti-spacing"> </span></span>缓冲区存储速度不同步的设备或者优先级不同的设备之间的传输数据，比如键盘、鼠标等；此外，<span>buffer<span class="heti-spacing"> </span></span>一般是用在写入磁盘的；</li>
<li><span>Cache<span class="heti-spacing"> </span></span>缓存区是位于<span class="heti-skip"><span class="heti-spacing"> </span>CPU<span class="heti-spacing"> </span></span>和主内存之间的容量较小但速度很快的存储器，<span>Cache<span class="heti-spacing"> </span></span>保存着<span class="heti-skip"><span class="heti-spacing"> </span>CPU<span class="heti-spacing"> </span></span>刚用过的数据或循环使用的数据；<span>Cache<span class="heti-spacing"> </span></span>缓存区的运用一般是在<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>的请求上</li>
</ul>
</div>
<p><span>C<span class="heti-spacing"> </span></span>语言中，用户输入的字符被收集并储存在缓冲区（buffer）中，<strong>按下<span class="keys"><kbd class="key-enter"><span class="heti-skip"><span class="heti-spacing"> </span>Enter<span class="heti-spacing"> </span></span></kbd></span>键后</strong>程序才能使用用户输入的字符。</p>
<ul>
<li>完全缓冲：仅缓冲区填满时刷新缓冲区（将内容发送至目的地<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，通常用于<strong>文件输入</strong>。缓冲区的大小取决于系统，常见大小为<span class="heti-skip"><span class="heti-spacing"> </span>512bits<span class="heti-spacing"> </span></span>和<span><span class="heti-spacing"> </span>4096bits</span>。</li>
<li>行缓冲：出现换行符时刷新缓冲区，通常用于<strong>键盘输入</strong>。所以在按下<span class="keys"><kbd class="key-enter"><span class="heti-skip"><span class="heti-spacing"> </span>Enter<span class="heti-spacing"> </span></span></kbd></span>键后程序才能使用用户输入的字符。</li>
</ul>
<p>与之对应地，无缓冲输入的程序能够立即使用用户输入的内容。</p>
<div class="admonition note">
<p class="admonition-title"><span>stdin,stdout,stderr<span class="heti-spacing"> </span></span>的缓冲类型</p>
<p><span>Unix<span class="heti-spacing"> </span></span>约定<span class="heti-skip"><span class="heti-spacing"> </span>stdin<span class="heti-spacing"> </span></span>与<span class="heti-skip"><span class="heti-spacing"> </span>stdout<span class="heti-spacing"> </span></span>若与终端关联则为行缓冲，而<span class="heti-skip"><span class="heti-spacing"> </span>stderr<span class="heti-spacing"> </span></span>为无缓冲。</p>
</div>
<div class="admonition tip">
<p class="admonition-title">为什么要有缓冲区？</p>
<ul>
<li>
<p>系统层面，减少<span class="heti-skip"><span class="heti-spacing"> </span>CPU<span class="heti-spacing"> </span></span>对磁盘的读写次数：<span>CPU<span class="heti-spacing"> </span></span>读取磁盘中的数据并不是直接读取磁盘，而是先将磁盘的内容读入到内存，也就是<span><span class="heti-spacing"> </span>Cache</span>，然后<span class="heti-skip"><span class="heti-spacing"> </span>CPU<span class="heti-spacing"> </span></span>对<span class="heti-skip"><span class="heti-spacing"> </span>Cache<span class="heti-spacing"> </span></span>进行读取，进而操作数据；计算机对<span class="heti-skip"><span class="heti-spacing"> </span>Cache<span class="heti-spacing"> </span></span>的操作时间远远小于对磁盘的操作时间，大大的加快了运行速度，提高<span class="heti-skip"><span class="heti-spacing"> </span>CPU<span class="heti-spacing"> </span></span>的使用效率。</p>
</li>
<li>
<p>在<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言输入中，把若干字符作为一个块进行传输比逐个发送这些字符节省时间，打错字符可以直接通过键盘修正错误。</p>
</li>
</ul>
</div>
<p>虽然缓冲输入好处很多，但是某些交互式程序也需要无缓冲输入。例如在游戏中，玩家的输入需要立即反应在屏幕上，而不是等待用户按下<span class="keys"><kbd class="key-enter"><span class="heti-skip"><span class="heti-spacing"> </span>Enter<span class="heti-spacing"> </span></span></kbd></span>键。</p>
<p><span>C<span class="heti-spacing"> </span></span>标准规定：<strong>输入是缓冲的</strong>。你能解释为什么<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>标准要规定输入是缓冲的吗？</p>
<details class="tip">
<summary>为什么<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>标准规定输入是缓冲的？</summary>
<p>一些计算机不允许无缓冲输入。<span>ANSI<span class="heti-spacing"> </span></span>没有提供调用无缓冲输入的标准方式，这意味着是否能进行无缓冲输入取决于计算机系统。</p>
<p>如果你的计算机允许无缓冲输入，那么你所用的<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>编译器很可能会提供一个无缓冲输入的选项。例如，许多<span class="heti-skip"><span class="heti-spacing"> </span>IBM PC<span class="heti-spacing"> </span></span>兼容机的编译器都为支持无缓冲输入提供一系列特殊函数，其原型在<code>conio.h</code>中。在<span class="heti-skip"><span class="heti-spacing"> </span>Unix<span class="heti-spacing"> </span></span>系统中，可以使用<code>iotcl()</code>函数指定待输入的类型，然后使用<code>getchar()</code>执行相应操作。在<span class="heti-skip"><span class="heti-spacing"> </span>ANSI C<span class="heti-spacing"> </span></span>中，用<code>setbuf()</code>和<code>setbufv()</code>控制缓冲，但是这两个函数可能不起作用。</p>
</details>
<details class="info">
<summary>我可以更改输入方式吗？</summary>
<p><span>UNIX<span class="heti-spacing"> </span></span>库中有 <code>ioctl()</code> 函数用于指定待输入的类型，但这不属于<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>标准。</p>
<p><span>ANSI C<span class="heti-spacing"> </span></span>中，可以使用 <code>setbuf()</code> 和 <code>setvbuf()</code> 控制缓冲，但受限于系统的设置。</p>
</details>
<h3 id="_2">流<a class="headerlink" href="#_2" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p><span>C<span class="heti-spacing"> </span></span>库提供的输入输出方式称为<strong>标准<span><span class="heti-spacing"> </span>I/O</span></strong>，它们是建立在操作系统提供的<strong>底层<span><span class="heti-spacing"> </span>I/O</span></strong> 上的。底层<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>之间常常会有一些差异：</p>
<div class="admonition note">
<p class="admonition-title">各个系统的文件差异</p>
<table>
<thead>
<tr>
<th>差异</th>
<th>UNIX</th>
<th>Windows</th>
<th>MacOS</th>
</tr>
</thead>
<tbody>
<tr>
<td>换行符</td>
<td><code>\n</code><br/> LF</td>
<td><code>\r\n</code> <br/>CRLF</td>
<td><code>\n</code> <span>(<span class="heti-spacing"> </span></span>较早的<span class="heti-skip"><span class="heti-spacing"> </span>MacOS<span class="heti-spacing"> </span></span>使用<code>\r</code><span><span class="heti-spacing"> </span>)</span><br/>LF</td>
</tr>
<tr>
<td>文件结束符</td>
<td><code>^D</code></td>
<td><code>^Z</code></td>
<td><code>^D</code></td>
</tr>
</tbody>
</table>
<p>注：如 <code>^Z</code> 代表 <code>Ctrl+Z</code>，你可以使用该组合键结束键盘输入。</p>
<p>文件结尾也不一定由文件结束符标记。事实上，<span>UNIX<span class="heti-spacing"> </span></span>系统储存文件大小信息，依据文件大小信息决定文件末尾。</p>
</div>
<p>从概念上看，<span>C<span class="heti-spacing"> </span></span>处理的是<strong>流</strong>而不是文件。不同属性和不同种类的输入，由属性更统一的<strong>流</strong>来表示。流告诉我们，我们可以用处理文件的方式来处理键盘输入。</p>
<p><span>C<span class="heti-spacing"> </span></span>语言中<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>流由<code>File</code>类型的对象表示，该对象只能通过<code>FILE*</code>类型的指针访问及操作。每个流都与外部的物理设备相关联。</p>
<div class="admonition note">
<p class="admonition-title">流</p>
<p>流就是一系列连续的字节。</p>
<p>打开文件的过程就是把<strong>流与文件相关联</strong>，读写都通过流来完成。</p>
</div>
<p><code>getchar()</code> 和 <code>scanf()</code> 等函数读取到文件结尾时会返回一个特殊的值 <code>EOF</code>，在 <code>stdio.h</code> 中定义了：</p>
<div class="highlight"><pre><span></span><code><span class="cp">#define EOF (-1) </span>
</code></pre></div>
<details class="tip">
<summary>你能解释为什么要把它定为 <code>-1</code> 吗？</summary>
<p>The value of <code>EOF</code> is -1 because it has to be different from any return value from <code>getchar</code> that is an actual character. So <code>getchar</code> returns any character value as an unsigned char, converted to int, which will therefore be non-negative.</p>
</details>
<p>因此，如果你在终端中进行输入，可以使用<code>Ctrl+Z(Windows)</code>或者<code>Ctrl+D(unix-style systems)</code>作为<code>EOF</code>结束输入。</p>
<p>由以上两部分，我们可以知道在<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>的键盘输入中，我们可以用<strong>Enter</strong>处理缓冲区中的内容，用<strong>Ctrl+Z</strong>或者<strong>Ctrl+D</strong>结束输入。</p>
<h3 id="_3">标准流<a class="headerlink" href="#_3" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>在标准头文件<code>&lt;stidio.h&gt;</code>中，定义了三个<strong>文本</strong>流。</p>
<div class="highlight"><pre><span></span><code><span class="cp">#define stdin  </span><span class="cm">/* 由实现定义 */</span>
<span class="cp">#define stdout </span><span class="cm">/* 由实现定义 */</span>
<span class="cp">#define stderr </span><span class="cm">/* 由实现定义 */</span>
</code></pre></div>
<p>这三个文本流是预定义的。这些流在程序启动时隐式打开，且为<strong>无取向</strong>的。</p>
<ol>
<li>与标准输入流关联，用于读取传统的输入。程序启动时，当且仅当能确定流不引用交互式设备时该流为完全缓冲。</li>
<li>与标准输出流关联，用于写入传统的输出。程序启动时，当且仅当能确定流不引用交互式设备时该流为完全缓冲。</li>
<li>与标准错误流关联，用于写入诊断输出。程序启动时，该流不为完全缓冲。</li>
</ol>
<div class="admonition note">
<p class="admonition-title">文件描述符</p>
<p>当一个程序成功向操作系统请求访问一个打开的文件<span class="heti-skip"><span class="heti-spacing"> </span>,<span class="heti-spacing"> </span></span>内核会返回一个指向内核中全局文件表<span class="heti-skip"><span class="heti-spacing"> </span>(global file table)<span class="heti-spacing"> </span></span>中的入口点<span class="heti-skip"><span class="heti-spacing"> </span>(entry)<span class="heti-spacing"> </span></span>的文件描述符<span class="heti-skip"><span class="heti-spacing"> </span>.<span class="heti-spacing"> </span></span>文件表入口点包含如<span class="heti-skip"><span class="heti-spacing"> </span>:<span class="heti-spacing"> </span></span>文件的<span class="heti-skip"><span class="heti-spacing"> </span>inode(<span class="heti-spacing"> </span></span>硬盘中的位置<span class="heti-skip"><span class="heti-spacing"> </span>),<span class="heti-spacing"> </span></span>字节偏移量<span class="heti-skip"><span class="heti-spacing"> </span>(byte offset),<span class="heti-spacing"> </span></span>以及对这个数据流的访问限制<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>只读<span class="heti-skip"><span class="heti-spacing"> </span>,<span class="heti-spacing"> </span></span>只写等<span><span class="heti-spacing"> </span>)</span>。</p>
<p>文件描述符<span class="heti-skip"><span class="heti-spacing"> </span>:<span class="heti-spacing"> </span></span>是计算机操作系统中被打开文件的唯一标识<span class="heti-skip"><span class="heti-spacing"> </span>.<span class="heti-spacing"> </span></span>它用来描述一种数据资源<span class="heti-skip"><span class="heti-spacing"> </span>,<span class="heti-spacing"> </span></span>以及这个数据资源可以如何被访问到。</p>
<p>在<span class="heti-skip"><span class="heti-spacing"> </span>Unix<span class="heti-spacing"> </span></span>系统当中<span class="heti-skip"><span class="heti-spacing"> </span>,<span class="heti-spacing"> </span></span>前三个文件描述符<span class="heti-skip"><span class="heti-spacing"> </span>0, 1, 2<span class="heti-spacing"> </span></span>默认为<span><span class="heti-spacing"> </span>stdin stdout stderr</span></p>
</div>
<h2 id="_4">字符输入输出<a class="headerlink" href="#_4" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<h3 id="_5">重定向<a class="headerlink" href="#_5" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>在开始介绍字符输入输出前，先介绍系统的重定向。</p>
<p>重定向是指改变标准输入输出的目的地。在<span class="heti-skip"><span class="heti-spacing"> </span>UNIX<span class="heti-spacing"> </span></span>系统中，可以使用<code>&gt;</code>和<code>&lt;</code>来重定向输入输出。</p>
<blockquote>
<p>例如，<code>ls &gt; ls.txt</code> 将<code>ls</code>的输出重定向到<code>ls.txt</code>文件中，<code>cat &lt; ls.txt</code>将<code>ls.txt</code>文件的内容重定向到<code>cat</code>命令中。</p>
</blockquote>
<p>重定向的目的地可以是文件，也可以是其他程序。</p>
<blockquote>
<p>例如，<code>ls | cat</code>将<code>ls</code>的输出重定向到<code>cat</code>命令中。</p>
</blockquote>
<p>更进一步，我们可以使用<code>&gt;&gt;</code>来追加输出重定向，<code>&lt;&lt;</code>来追加输入重定向。</p>
<p>结合上一节讲的内容，你可以说出<code>2&gt;</code>和<code>2&gt;&gt;</code>的作用吗？</p>
<h3 id="_6">无格式输入<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>输出<a class="headerlink" href="#_6" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>在字符<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>中，我们常使用以下函数来处理字符，这些函数位于<code>&lt;stdio.h&gt;</code>头文件中。<code>&lt;wchar.h&gt;</code> 头文件提供了具有宽字符输入<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>输出功能的函数。</p>
<div class="admonition info">
<p class="admonition-title">e.g.</p>
<div class="highlight"><span class="filename">echo_eof.c</span><pre><span></span><code><span class="cm">/* echo_eof.c -- repeats input to end of file */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ch</span><span class="p">;</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">ch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getchar</span><span class="p">())</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">EOF</span><span class="p">)</span>
<span class="w">    </span><span class="n">putchar</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>结合重定向运算符，我们可以使用<code>echo_eof &lt; echo_eof.c</code>来测试该程序。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>echo_eof<span class="w"> </span>&lt;<span class="w"> </span>echo_eof.c
$<span class="w"> </span>echo_eof<span class="w"> </span>&lt;<span class="w"> </span>echo_eof.c<span class="w"> </span>&gt;<span class="w"> </span>echo_eof.txt
$<span class="w"> </span>echo_eof<span class="w"> </span>&lt;<span class="w"> </span>echo_eof.c<span class="w"> </span><span class="p">|</span><span class="w"> </span>cat
</code></pre></div>
</div>
<p>窄字符无格式输入输出函数，定义于 <code>&lt;stdio.h&gt;</code> 头文件中：</p>
<table>
<thead>
<tr>
<th>功能</th>
<th>函数</th>
<th>失败返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int getchar(void)</code><br/> <code>int getc(FILE *stream)</code> <br/> <code>int fgetc(FILE *stream)</code></td>
<td>单字符输入</td>
<td>EOF</td>
</tr>
<tr>
<td><code>char *fgets(char *s, int size, FILE *stream)</code> <br/> <code>char *gets_s( char *str, rsize_t n)</code></td>
<td>字符串输入</td>
<td>NULL</td>
</tr>
<tr>
<td><code>int ungetc(int c, FILE *stream)</code></td>
<td>放回文件流</td>
<td>EOF</td>
</tr>
<tr>
<td><code>int putchar(int c)</code><br/> <code>int putc(int c, FILE *stream)</code> <br/> <code>int fputc(int c, FILE *stream)</code></td>
<td>单字符输出</td>
<td>EOF</td>
</tr>
<tr>
<td><code>int puts(const char *s)</code><br/> <code>int fputs(const char *s, FILE *stream)</code></td>
<td>字符串输出</td>
<td>EOF</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注意</p>
<ul>
<li>
<p>以上函数都将字符从缓冲区中的 <code>unsigned char</code> 类型转换为 <code>int</code> 类型。</p>
</li>
<li>
<p><code>getchar()</code>它的返回值是 <code>int</code> 类型而非 <code>char</code> 类型，值得注意。所以为什么可以使用<code>char c = getchar()</code><span><span class="heti-spacing"> </span>?</span></p>
</li>
</ul>
</div>
<details class="tip">
<summary>那么这是否会造成<span class="heti-skip"><span class="heti-spacing"> </span>EOF<span class="heti-spacing"> </span></span>不能被识别，而是被看作字符呢？</summary>
<div class="highlight"><pre><span></span><code><span class="cp">#define EOF (-1) </span><span class="c1">// unsigned char转换成int后，值都大于等于0</span>
</code></pre></div>
</details>
<p>宽字符输入输出定义于 <code>&lt;wchar.h&gt;</code> 头文件中，区别在于其一个字符的长度不同。<span>C<span class="heti-spacing"> </span></span>语言中有一种类型<code>wchar_t</code><span class="heti-skip"><span class="heti-spacing"> </span>,<span class="heti-spacing"> </span></span>其长度取决于编译器：</p>
<ul>
<li>在<span class="heti-skip"><span class="heti-spacing"> </span>msvc<span class="heti-spacing"> </span></span>中，<code>wchar_t</code>为<span class="heti-skip"><span class="heti-spacing"> </span>16<span class="heti-spacing"> </span></span>位，即<code>unsigned short</code>类型。</li>
<li>在<span class="heti-skip"><span class="heti-spacing"> </span>gcc/Clang<span class="heti-spacing"> </span></span>中，<code>wchar_t</code>为<span class="heti-skip"><span class="heti-spacing"> </span>32<span class="heti-spacing"> </span></span>位，即<code>unsigned int</code>类型。</li>
</ul>
<p>在使用宽字符前，需要在字符和字符串前加上<code>L</code>前缀，例如<code>L'c'</code>和<code>L"string"</code>，未加前缀的字符和字符串为窄字符。
对于宽字符/字符串读写函数，其使用方法与窄字符类似。</p>
<table>
<thead>
<tr>
<th>功能</th>
<th>函数</th>
<th>失败返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int getwchar(void)</code><br/> <code>int getwc(FILE *stream)</code> <br/> <code>int fgetwc(FILE *stream)</code></td>
<td>单字符输入</td>
<td>EOF</td>
</tr>
<tr>
<td><code>char *fgetws(char *s, int size, FILE *stream)</code></td>
<td>字符串输入</td>
<td>NULL</td>
</tr>
<tr>
<td><code>int ungetwc(int c, FILE *stream)</code></td>
<td>放回文件流</td>
<td>EOF</td>
</tr>
<tr>
<td><code>int putwchar(int c)</code><br/> int fputwc(int c, FILE *stream)`</td>
<td>单字符输出</td>
<td>EOF</td>
</tr>
<tr>
<td><code>int fputws(const char *s, FILE *stream)</code></td>
<td>字符串输出</td>
<td>EOF</td>
</tr>
</tbody>
</table>
<h3 id="_7">格式化输入输出<a class="headerlink" href="#_7" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>在标头<code>&lt;stdio.h&gt;</code>和<code>&lt;wchar.h&gt;</code>中，定义了一系列格式化输入输出函数，这些函数可以用于读写格式化的数据。</p>
<h4 id="_8"><a href="https://zh.cppreference.com/w/c/io/fprintf">格式字符串</a><a class="headerlink" href="#_8" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<p>格式字符串<code>const char *format</code>由普通多字节字符（除了<span><span class="heti-spacing"> </span>%</span>）和转换指示构成，前者被复制到输出流而无更改。每个转换指示拥有下列格式：</p>
<ul>
<li>引入的<span class="heti-skip"><span class="heti-spacing"> </span>%<span class="heti-spacing"> </span></span>字符</li>
<li><span>(<span class="heti-spacing"> </span></span>可选<span class="heti-skip"><span class="heti-spacing"> </span>)<span class="heti-spacing"> </span></span>一或多个修改转换行为的标签：<ul>
<li><span>- :<span class="heti-spacing"> </span></span>转换结果在域内左校正（默认为右校正）</li>
<li><span>+:<span class="heti-spacing"> </span></span>有符号转换的符号始终前置于转换结果（默认结果前置负号仅当它为负）</li>
<li>空格：若有符号转换的结果不以符号开始，或为空，则前置空格于结果。若存在<span class="heti-skip"><span class="heti-spacing"> </span>+<span class="heti-spacing"> </span></span>标签则忽略空格。</li>
<li># ：进行替用形式的转换。准确的效果见下表，其他情况下行为未定义。</li>
<li>0：对于整数和浮点数转换，使用前导零代替空格字符填充域。对于整数，若显式指定精度，则忽略此标签。对于其他转换，使用此标签导致未定义行为。若存在<span class="heti-skip"><span class="heti-spacing"> </span>-<span class="heti-spacing"> </span></span>标签则忽略<span><span class="heti-spacing"> </span>0</span>。</li>
</ul>
</li>
<li><span>(<span class="heti-spacing"> </span></span>可选<span class="heti-skip"><span class="heti-spacing"> </span>)<span class="heti-spacing"> </span></span>指定最小域宽的整数值或 <code>*</code> 。若有要求，则结果会以空格字符（默认情况）填充，在右校正时于左，左校正时于右。使用 <code>*</code> 的情况下，以一个额外的<code>int</code>类型参数指定宽度。若参数值为负数，则它导致指定<span class="heti-skip"><span class="heti-spacing"> </span>-<span class="heti-spacing"> </span></span>标签和正域宽<heti-adjacent class="heti-adjacent-half">。</heti-adjacent>（注意：这是最小宽度：决不被截断值<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>。</li>
<li><span>(<span class="heti-spacing"> </span></span>可选<span class="heti-skip"><span class="heti-spacing"> </span>)<span class="heti-spacing"> </span></span>后随整数或 <code>*</code> 或两者皆无的 <code>.</code> 指示转换的精度。在使用 <code>*</code> 的情况下，精度由额外的<span class="heti-skip"><span class="heti-spacing"> </span>int<span class="heti-spacing"> </span></span>类型参数指定。若此参数的值为负数，则它被忽略。若既不使用数字亦不使用 <code>*</code> ，则精度采用零。精度的准确效果见下表。</li>
<li><span>(<span class="heti-spacing"> </span></span>可选<span class="heti-skip"><span class="heti-spacing"> </span>)<span class="heti-spacing"> </span></span>指定参数大小的长度修饰符</li>
<li>转换格式指示符</li>
</ul>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="../lec3.assets/printf.png"><img alt="printf" src="../lec3.assets/printf.png"/></a></p>
<h4 id="printf"><code>printf()</code>中转换说明的意义<a class="headerlink" href="#printf" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<p>转换说明实际上是在将以二进制存存储在计算机中的值转换成一些列字符便于显示。转换实际上是一种翻译说明。</p>
<blockquote>
<p>例如：<code>d</code>：将一个有符号的十进制整数转换成十进制数。</p>
</blockquote>
<p>下面讨论几种转换说明的情况：</p>
<ol>
<li>
<p>转换不匹配</p>
<p>转换说明与待打印的值不匹配可能导致数据错误或者出现未定义的行为。</p>
<div class="admonition info">
<p class="admonition-title">e.g.</p>
<p></p><div class="highlight"><span class="filename">wrong_cnv.c</span><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#define num 336</span>
<span class="cp">#define b 65618</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"num as short and unsigned short:  %hd %hu</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">num</span><span class="p">,</span><span class="n">num</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"-num as short and unsigned short: %hd %hu</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">num</span><span class="p">,</span><span class="o">-</span><span class="n">num</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"num as int and char: %d %c</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">num</span><span class="p">,</span><span class="w"> </span><span class="n">num</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"b as int, short, and char: %d %hd %c</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>

<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">n1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.0</span><span class="p">;</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">n2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.0</span><span class="p">;</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">n3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2000000000</span><span class="p">;</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">n4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">;</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"%.1e %.1e %.1e %.1e</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="n">n2</span><span class="p">,</span><span class="w"> </span><span class="n">n3</span><span class="p">,</span><span class="w"> </span><span class="n">n4</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"%ld %ld</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">n3</span><span class="p">,</span><span class="w"> </span><span class="n">n4</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"%ld %ld %ld %ld</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w"> </span><span class="n">n2</span><span class="p">,</span><span class="w"> </span><span class="n">n3</span><span class="p">,</span><span class="w"> </span><span class="n">n4</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
该程序的输出结果为 (<strong>由于实现是未定义的，部分结果因系统和编译器而异</strong>)：
<div class="highlight"><pre><span></span><code><span class="w">    </span>num<span class="w"> </span>as<span class="w"> </span>short<span class="w"> </span>and<span class="w"> </span>unsigned<span class="w"> </span>short:<span class="w">  </span><span class="m">336</span><span class="w"> </span><span class="m">336</span>
<span class="w">    </span>-num<span class="w"> </span>as<span class="w"> </span>short<span class="w"> </span>and<span class="w"> </span>unsigned<span class="w"> </span>short:<span class="w"> </span>-336<span class="w"> </span><span class="m">65200</span>
<span class="w">    </span>num<span class="w"> </span>as<span class="w"> </span>int<span class="w"> </span>and<span class="w"> </span>char:<span class="w"> </span><span class="m">336</span><span class="w"> </span>P
<span class="w">    </span>b<span class="w"> </span>as<span class="w"> </span>int,<span class="w"> </span>short,<span class="w"> </span>and<span class="w"> </span>char:<span class="w"> </span><span class="m">65618</span><span class="w"> </span><span class="m">82</span><span class="w"> </span>R
<span class="w">    </span><span class="m">3</span>.0e+00<span class="w"> </span><span class="m">3</span>.0e+00<span class="w"> </span><span class="m">2</span>.0e+09<span class="w"> </span><span class="m">1</span>.2e+09
<span class="w">    </span><span class="m">2000000000</span><span class="w"> </span><span class="m">1234567890</span>
<span class="w">    </span><span class="m">0</span><span class="w"> </span><span class="m">1074266112</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1074266112</span>
</code></pre></div>
你能解释为什么使用%ld 输出 long 类型的值时，也会出现错误吗？
</div>
</li>
<li>
<p><code>printf()</code>的返回值</p>
<p><code>printf()</code>函数返回打印的字符数，若出现错误则返回负值。</p>
</li>
<li>
<p>打印长的字符串</p>
<p>不能在双引号括起来的字符串中间断行。</p>
<div class="admonition info">
<p class="admonition-title">e.g.</p>
<div class="highlight"><span class="filename">longstrg.c</span><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"Here's one way to print a "</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"long string.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"Here's another way to print a \</span>
<span class="s">    long string.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"Here's the newest way to print a "</span>
<span class="w">    </span><span class="s">"long string.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span><span class="w"> </span><span class="cm">/* ANSI C */</span>
<span class="w">    </span><span class="cm">/*</span>
<span class="cm">    printf("Here's wrong way to print a</span>
<span class="cm">    long string.\n");</span>
<span class="cm">    */</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>
</li>
</ol>
<h4 id="scanf"><code>scanf()</code><a class="headerlink" href="#scanf" title="Permanent link">¶</a></h4>
<p>在前面我们介绍了<code>printf()</code>中的格式化字符串和转换说明，<code>scanf()</code>中也有类似的格式化字符串和转换说明。</p>
<p>复杂的使用方法请查阅<a href="https://zh.cppreference.com/w/c/io/fscanf"><span><span class="heti-spacing"> </span>scanf</span></a>。</p>
<p>下面介绍一些<code>scanf()</code>的特性：</p>
<ol>
<li>
<p><code>scanf()</code>要将读取的内容存储到对应变量地址中，而不是变量名。因此，<code>scanf()</code>的参数应该是变量的地址。</p>
<details class="info">
<summary>e.g.</summary>
<div class="highlight"><span class="filename">scanf.c</span><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">str</span><span class="p">[</span><span class="mi">30</span><span class="p">];</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>

<span class="w">    </span><span class="n">scanf</span><span class="p">(</span><span class="s">"%d %f"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">b</span><span class="p">);</span><span class="w"> </span><span class="c1">// 读取整数和浮点数</span>
<span class="w">    </span><span class="n">scanf</span><span class="p">(</span><span class="s">"%s"</span><span class="p">,</span><span class="w"> </span><span class="n">str</span><span class="p">);</span><span class="w">       </span><span class="c1">// 读取字符串</span>
<span class="w">    </span><span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">);</span><span class="w">        </span><span class="c1">// 读取整数数组</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</details>
</li>
<li>
<p><code>scanf()</code> 函数，除了 <code>%c</code> 以外的转换说明，都不会读取空白字符（空格、制表符和回车<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>。</p>
<p><strong>典型问题：换行符问题</strong></p>
<div class="admonition info">
<p class="admonition-title">e.g.</p>
<div class="highlight"><span class="filename">confusing_scanf.c</span><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="w">    </span><span class="n">scanf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"%s"</span><span class="p">,</span><span class="n">c</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</div>
</li>
<li>
<p><code>scanf()</code>中的输入过程</p>
<p>假设<code>scanf()</code>根据<code>%d</code>转换读取一个整数，<code>scanf()</code>函数每次读取一个字符，跳过所有的空白字符，直到遇到第一个非空白字符才开始读取。<code>scanf()</code>希望找到一个数字字符或者一个符号，若找到，则会继续寻找下一个数字字符或者符号，直到遇到一个非数字字符，此时<code>scanf()</code>会将读取的字符放回输入流中，然后将读取的字符转换成整数。</p>
<p>如果第一个非空白字符不是数字或者正负号，<code>scanf()</code>会停在那里，并把字符放回输入中，不会把值赋给相应变量。<span>C<span class="heti-spacing"> </span></span>语言规定了在第<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>个出错的地方停止读取输入。</p>
<p>如果使用<code>%s</code>转换说明，<code>scanf()</code>会跳过空白开始读取除空白以外的所有字符，直到遇到空白字符之后将空白符重新放回输入后结束。</p>
</li>
<li>
<p>格式字符串中的普通字符</p>
<p><code>scanf()</code>中格式化字符串中的空白意味着跳过下一个输入项前的所有空白。</p>
<p>除了<code>%c</code>其他转换说明都会自动跳过待输入值前面的所有空白。</p>
<div class="admonition tip">
<p class="admonition-title">以下代码有什么区别？</p>
<div class="highlight"><pre><span></span><code><span class="n">scanf</span><span class="p">(</span><span class="s">"%d %d"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">n</span><span class="p">,</span><span class="o">&amp;</span><span class="n">m</span><span class="p">);</span>
<span class="n">scanf</span><span class="p">(</span><span class="s">"%d%d"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">n</span><span class="p">,</span><span class="o">&amp;</span><span class="n">m</span><span class="p">);</span>

<span class="n">scanf</span><span class="p">(</span><span class="s">"%c"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span>
<span class="n">scanf</span><span class="p">(</span><span class="s">" %c"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">);</span>
</code></pre></div>
</div>
</li>
<li>
<p><code>scanf()</code>的返回值</p>
<p>读取成功则返回读取的项数。没有读取任何项则返回<span><span class="heti-spacing"> </span>0</span>。当<code>scanf()</code>读取到文件末尾则返回<code>EOF</code>。</p>
</li>
</ol>
<h3 id="_9">实例<a class="headerlink" href="#_9" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<h4 id="_10">安全的输入函数<a class="headerlink" href="#_10" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<div class="admonition note">
<p class="admonition-title">写一个安全的输入函数</p>
<p>众所周知，<span>C<span class="heti-spacing"> </span></span>语言的<code>gets</code>函数是一个非常不安全的函数<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>请参考系统知识拾遗<span><span class="heti-spacing"> </span>1)</span>，在<span class="heti-skip"><span class="heti-spacing"> </span>C11<span class="heti-spacing"> </span></span>中被弃用，转为<code>gets_s()</code>。<code>gets()</code>极有可能造成缓冲区溢出，所以我们需要写一个安全的输入函数。</p>
<div class="highlight"><span class="filename">s_gets.c</span><pre><span></span><code><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nf">s_gets</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">st</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ret_val</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="n">ret_val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fgets</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">stdin</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret_val</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="sc">'\n'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">st</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="err">'\</span><span class="mi">0</span><span class="p">)</span>
<span class="w">            </span><span class="n">i</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">'\n'</span><span class="p">)</span>
<span class="w">            </span><span class="n">st</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">'\0'</span><span class="p">;</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="c1">//must have words[i] == '\0'</span>
<span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">getchar</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="sc">'\n'</span><span class="p">)</span>
<span class="w">                </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ret_val</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>这个函数来自《C Primer Plus<heti-adjacent class="heti-adjacent-half">》</heti-adjacent>，也是书中<span class="heti-skip"><span class="heti-spacing"> </span>13<span class="heti-spacing"> </span></span>章以后一直使用的输入函数。这个函数示范了如何使用安全的 <code>fgets()</code> 函数，并<strong>将输入统一</strong>，并处理剩余的字符。</p>
<p>在涉及行的输入时，一定要注意统一行结尾的形式。这对于换行符，特别是<strong>文件结尾处薛定谔的换行符</strong>，有很大作用。</p>
</div>
<h4 id="_11">检查输入<a class="headerlink" href="#_11" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<p>可以使用<code>scanf()</code> 的返回值来检查输入是否正确。</p>
<h2 id="_12">文件编码与文件输入输出<a class="headerlink" href="#_12" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h2>
<h3 id="_13">基础概念<a class="headerlink" href="#_13" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<h4 id="_14">什么是文件？<a class="headerlink" href="#_14" title="Permanent link">¶</a></h4>
<p>简单的说，文件是在硬盘上的一段已命名的储存区。</p>
<p>对操作系统而言，文件更加复杂。文件是具有符号名的，在逻辑上具有完整意义的一组相关信息项的序列。文件还包括了一些额外数据，便于操作系统确定文件的种类。</p>
<div class="highlight"><span class="filename">c_file.c</span><pre><span></span><code><span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="cpf">&lt;string.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[]){</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"ckc-agc programming lec3"</span><span class="p">;</span>

<span class="w">    </span><span class="kt">FILE</span><span class="w"> </span><span class="o">*</span><span class="n">fp1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fopen</span><span class="p">(</span><span class="s">"test1.txt"</span><span class="p">,</span><span class="w"> </span><span class="s">"wb+"</span><span class="p">);</span>
<span class="w">    </span><span class="kt">FILE</span><span class="w"> </span><span class="o">*</span><span class="n">fp2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fopen</span><span class="p">(</span><span class="s">"test2.txt"</span><span class="p">,</span><span class="w"> </span><span class="s">"w+"</span><span class="p">);</span>
<span class="w">    </span><span class="n">fprintf</span><span class="p">(</span><span class="n">fp1</span><span class="p">,</span><span class="w"> </span><span class="s">"%s</span><span class="se">\n</span><span class="s">%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="n">fprintf</span><span class="p">(</span><span class="n">fp2</span><span class="p">,</span><span class="w"> </span><span class="s">"%s</span><span class="se">\n</span><span class="s">%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="n">fwrite</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">),</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">),</span><span class="w"> </span><span class="n">fp1</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// fseek(fp1, 0, SEEK_SET);</span>
<span class="w">    </span><span class="c1">// fprintf(fp1, "%s\n", "SEEK_SET");</span>
<span class="w">    </span><span class="n">fseek</span><span class="p">(</span><span class="n">fp1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">SEEK_END</span><span class="p">);</span>
<span class="w">    </span><span class="n">fprintf</span><span class="p">(</span><span class="n">fp1</span><span class="p">,</span><span class="w"> </span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="s">"SEEK_END"</span><span class="p">);</span>

<span class="w">    </span><span class="n">rewind</span><span class="p">(</span><span class="n">fp1</span><span class="p">);</span>
<span class="w">    </span><span class="n">fprintf</span><span class="p">(</span><span class="n">fp1</span><span class="p">,</span><span class="w"> </span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="s">"rewind"</span><span class="p">);</span>

<span class="w">    </span><span class="n">fclose</span><span class="p">(</span><span class="n">fp1</span><span class="p">);</span>
<span class="w">    </span><span class="n">fclose</span><span class="p">(</span><span class="n">fp2</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>file<span class="w"> </span>c_file.c
file<span class="w"> </span>c_file.o
file<span class="w"> </span>c_file
objdump<span class="w"> </span>-h<span class="w"> </span>-s<span class="w"> </span>-d<span class="w"> </span>c_file.o
objdump<span class="w"> </span>-h<span class="w"> </span>-s<span class="w"> </span>c_file
</code></pre></div>
<p>对于<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>语言来说，<span>C<span class="heti-spacing"> </span></span>把文件看作连续的字节，每个字节都能被单独读取。这与<span class="heti-skip"><span class="heti-spacing"> </span>UNIX<span class="heti-spacing"> </span></span>环境中的文件结构相对应。便于其他操作系统，<span>C<span class="heti-spacing"> </span></span>提供两种文件模式：文本模式和二进制模式。</p>
<h4 id="_15">文件编码<a class="headerlink" href="#_15" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<p>字符编码是把字符集中的字符编码为指定集合中某一对象（例如：<span>bit<span class="heti-spacing"> </span></span>流<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，以便文本在计算机中存储和通过通信网络的传递。</p>
<p>常见的文件字符集<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>编码：</p>
<ul>
<li><span>ASCII<span class="heti-spacing"> </span></span>字符集：
    8bit（一个字节），能表示的最大的整数就是 255（2^8-1=255）。ASCII 编码，占用 0 - 127 用来表示大小写英文字母、数字和一些符号，这个编码表被称为 ASCII 编码，比如大写字母 A 的编码是 65，小写字母 z 的编码是 122。还对一些如'\n'，'\t'，'#'，'@'等字符进行了编码。</li>
<li><span>base<span class="heti-spacing"> </span></span>家族编码<span><span class="heti-spacing"> </span>:(base16/base32/base64/base58/base85/base100)</span>
    使用对应数量的字符编码二进制数据</li>
<li><span>GB2312<span class="heti-spacing"> </span></span>编码：
    16bit（2 个字节），适用于汉字处理、汉字通信等系统之间的信息交换，通行于中国大陆。中国大陆几乎所有的中文系统和国际化的软件都支持 GB2312。</li>
<li><span>GBK<span class="heti-spacing"> </span></span>编码：
    16bit（2 个字节），兼容 GB2312，收录 21003 个汉字，共有 23940 个码位，与 Unicode 组织的 Unicode 编码完全兼容。</li>
<li><span>Unicode<span class="heti-spacing"> </span></span>字符集：
    为了统一所有文字的编码，Unicode 应运而生，这是一种所有符号的编码。Unicode 是国际标准字符集，它将世界各种语言的每个字符定义一个唯一的编码，以满足跨语言、跨平台的文本信息转换 Unicode 字符集的编码范围是 0x0000 - 0x10FFFF , 可以容纳一百多万个字符，每个字符都有一个独一无二的编码，也即每个字符都有一个二进制数值和它对应，这里的二进制数值也叫<strong>码点</strong></li>
<li><span>UTF(UTF-8,UTF-16<span class="heti-spacing"> </span></span>等<span><span class="heti-spacing"> </span>)</span>：
    Unicode Transformation Format，可变长度编码，通常使用 1~4 字节为每个字符编码，兼容 ASCII 编码，这是一种 Unicode 的一种转换格式。</li>
</ul>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="../lec3.assets/utf-8.png"><img alt="utf-8" src="../lec3.assets/utf-8.png"/></a></p>
<p>现在在内存中通常以<span class="heti-skip"><span class="heti-spacing"> </span>UTF-16(Windows API<span class="heti-spacing"> </span></span>大量偏好<span class="heti-skip"><span class="heti-spacing"> </span>UTF-16 LE<span class="heti-spacing"> </span></span>编码的字符串作为参数<span class="heti-skip"><span class="heti-spacing"> </span>)<span class="heti-spacing"> </span></span>来储存，保存到文件中替换为<span class="heti-skip"><span class="heti-spacing"> </span>UTF-8<span class="heti-spacing"> </span></span>等格式，可以压缩空间。</p>
<h4 id="_16">文本模式和二进制模式<a class="headerlink" href="#_16" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<p>所有文件的内容都以二进制形式存储。但是，如果文件最初使用二进制编码的字符<span class="heti-skip"><span class="heti-spacing"> </span>(<span class="heti-spacing"> </span></span>例如<span class="heti-skip"><span class="heti-spacing"> </span>ASCII<span class="heti-spacing"> </span></span>码<span class="heti-skip"><span class="heti-spacing"> </span>)<span class="heti-spacing"> </span></span>表示文本，该文件就是文本文件，其中包含文本内容。如果文件中的二进制值代表及其语言代码或数值数据，该文件是二进制文件，其中包含二进制内容。</p>
<p><span>Unix<span class="heti-spacing"> </span></span>使用同一种文件格式处理文本文件和二进制文件的内容。<span>Unix<span class="heti-spacing"> </span></span>目录中有一个统计文件大小的计数，程序可以根据该计数确定是否读到文件尾。</p>
<p><span>C<span class="heti-spacing"> </span></span>语言提供两种访问文件的途径：二进制模式和文本模式。在二进制模式中，程序可以访问文件的每个字节，而在文本模式中，程序所见的内容和文件的实际内容不同。程序以文本模式读取文件时，把本地环境表示的行末尾或文件结尾映射成<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>模式。</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="../lec3.assets/c_file_mode.png"><img alt="mode" src="../lec3.assets/c_file_mode.png"/></a></p>
<p>这告诉我们文本和二进制模式不能随意混用，否则可能会出现正确性上的问题。</p>
<details class="note">
<summary><span>I/O<span class="heti-spacing"> </span></span>级别</summary>
<p>事实上我们除了选择处理文件的模式，还能够选择<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>的级别。底层<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>使用操作系统提供的<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>服务。标准高级<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>使用<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>库的标准包和<code>stdio.h</code>头文件定义。标准高级<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>使用底层<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>服务，但是它们提供了更高级别的接口。因为无法保证所有的操作系统都适用相同的底层<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>模型，<span>C<span class="heti-spacing"> </span></span>标准只支持标准<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>包。</p>
</details>
<details class="note">
<summary>标准文件</summary>
<p><span>C<span class="heti-spacing"> </span></span>程序会自动打开<span class="heti-skip"><span class="heti-spacing"> </span>3<span class="heti-spacing"> </span></span>个文件，它们被称为标准输入（standard input<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>、标准输出（standard output）和标准错误输出（standard error output<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>。在默认情况下，标准输入是系统的普通输入设备，通常为键盘；标准输出和标准错误输出是系统的普通输出设备，通常为显示屏。</p>
<p>通常，标准输入为程序提供输入，它是 <code>getchar()</code>和 <code>scanf()</code>使用的文件。程序通常输出到标准输出，它是<code>putchar()</code>、<code>puts()</code>和<code>printf()</code>使用的文件。前文提到的重定向把其他文件视为标准输入或标准输出。标准错误输出提供了一个逻辑上不同的地方来发送错误消息。例如，如果使用重定向把输出发送给文件而不是屏幕，那么发送至标准错误输出的内容仍然会被发送到屏幕上。这样很好，因为如果把错误消息发送至文件，就只能打开文件才能看到。</p>
<p>理解：标准<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>中用<span><span class="heti-spacing"> </span>FILE</span>（流）表示一个打开的文件</p>
</details>
<h3 id="_17">流和文件<a class="headerlink" href="#_17" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p><span>C<span class="heti-spacing"> </span></span>标准是这样描述两种流的：</p>
<ul>
<li>文本流：组成文本行的有序字符序列，每一行由零个或多个字符加上标志结束的换行符组成。<ul>
<li>实现定义：最后一行是否需要换行符、换行符正前面的空格是否在读取时出现等。</li>
</ul>
</li>
<li>二进制流：字符的有序序列。</li>
</ul>
<p>关于文件动作：</p>
<ul>
<li>打开文件：流打开一个文件，就是与该文件<strong>关联</strong>。<ul>
<li>创建文件会丢弃内容。</li>
<li>和流相关的文件定位符定位在文件起始位置。</li>
<li>附加模式下定位位置由实现决定。</li>
</ul>
</li>
<li>关闭文件：关闭文件会释放与该文件相关的资源。</li>
</ul>
<h3 id="_18">类型和宏<a class="headerlink" href="#_18" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<p>在 <code>&lt;stdio.h&gt;</code> 中有如下与文件相关的类型和宏：</p>
<ul>
<li><code>FILE</code> 对象类型，记录控制<strong>流</strong>所需要的所有信息，包括：文件定位符、指向相关缓冲的指针、错误指示符和文件结束符。<ul>
<li>不要试图探索 <code>FILE *</code> 数据对象的内部，即使实现给出了某些可见域。不要修改对象、不要拷贝对象并代替使用，因为<strong>实现假定知道流数据对象的所有地址</strong>。</li>
</ul>
</li>
<li><code>fpos_t</code> 对象类型，含有唯一指定文件中每个位置所需的所有信息。</li>
<li><code>stderr</code><span>,<span class="heti-spacing"> </span></span><code>stdin</code><span>,<span class="heti-spacing"> </span></span><code>stdout</code>都是 <code>FILE*</code> 类型的表达式。</li>
<li><code>EOF</code> 展开为一个负的整值常量。</li>
<li><code>NULL</code></li>
<li><code>SEEK_CUR</code> 文件当前位置</li>
<li><code>SEEK_END</code> 文件结束位置</li>
<li><code>SEEK_SET</code> 文件开始位置</li>
</ul>
<h3 id="_19">函数<a class="headerlink" href="#_19" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h3>
<h4 id="_20">文件操作<a class="headerlink" href="#_20" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<ul>
<li><code>int remove (const char *filename)</code></li>
<li><code>int rename (const char *old, const char *new)</code></li>
<li><code>FILE *tmpfile(void)</code></li>
<li><code>char * tmpnam(char *s)</code></li>
</ul>
<h4 id="_21">文件访问<a class="headerlink" href="#_21" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<ul>
<li><code>int fclose(FILE *stream)</code><ul>
<li>关闭文件，清空流（清空流就是传递缓冲数据<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，释放缓冲。</li>
</ul>
</li>
<li><code>int fflush(FILE *stream)</code><ul>
<li>立即写入（要求上一次操作是输出<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>。</li>
</ul>
</li>
<li><code>FILE *fopen(const char *filename, const char *mode)</code><ul>
<li>打开文件，返回文件流指针。</li>
</ul>
</li>
<li><code>FILE *freopen(const char *filename, const char *mode, FILE *stream)</code></li>
<li><code>void setbuf(FILE *stream, char *buf)</code><ul>
<li>定义流<span class="heti-skip"><span class="heti-spacing"> </span>stream<span class="heti-spacing"> </span></span>应如何缓冲。该函数应在与流<span class="heti-skip"><span class="heti-spacing"> </span>stream<span class="heti-spacing"> </span></span>相关的文件被打开时，且还未发生任何输入或输出操作之前被调用一次</li>
</ul>
</li>
<li><code>int setvbuf(FILE *stream, char *buf, int mode, size_t size)</code><ul>
<li>创建供标准<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>函数替换使用的缓冲区</li>
</ul>
</li>
</ul>
<h4 id="mode"><span>mode<span class="heti-spacing"> </span></span>字符串的含义<a class="headerlink" href="#mode" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<table>
<thead>
<tr>
<th>flag</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>read</td>
</tr>
<tr>
<td>w</td>
<td>write (new or cut)</td>
</tr>
<tr>
<td>a</td>
<td>append (new or append)</td>
</tr>
<tr>
<td>b</td>
<td>binary</td>
</tr>
<tr>
<td>+</td>
<td>update</td>
</tr>
</tbody>
</table>
<p>注意上面词语的含义，<span>update<span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span>append<span class="heti-spacing"> </span></span>能写入的范围应该是不同的。</p>
<ul>
<li><span>append<span class="heti-spacing"> </span></span>模式下<strong>所有写操作</strong>强制加到文件结束处。</li>
<li><span>update<span class="heti-spacing"> </span></span>模式下，若不调用文件定位函数，输入输出不一定相互紧跟。</li>
</ul>
<p>对于<span class="heti-skip"><span class="heti-spacing"> </span>UNIX<span class="heti-spacing"> </span></span>这种只有一种文件类型的系统，带 <code>b</code> 与否的模式是相同的。
C11 中新增了 <code>x</code>，带该字母的写模式打开存在文件会失败（相当于加了保护），且允许独占。</p>
<h4 id="_22">格式化输入<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>输出<a class="headerlink" href="#_22" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<p><code>fprintf</code>,<code>fscanf</code>,<code>vfprintf</code>,<code>vprintf</code>,<code>vsprintf</code></p>
<h4 id="_23">字符输入<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>输出<a class="headerlink" href="#_23" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<p><code>fgetc</code>,<code>fgets</code>,<code>fputc</code>,<code>fputs</code>,<code>getc</code>,<code>getchar</code>,<code>gets_s</code>/<code>(gets)</code>,<code>putc</code>,<code>putchar</code>,<code>puts</code>,<code>ungetc</code></p>
<p>其中，<code>fgetc()</code> 与 <code>getc()</code> 这类函数的不同是后者可能被实现为宏。</p>
<h4 id="io_1">直接<span><span class="heti-spacing"> </span>I/O</span><a class="headerlink" href="#io_1" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<ul>
<li><code>size_t fread(void *ptr, size_t size, size_t nmemb, FILE *stream)</code></li>
<li><code>size_t fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream)</code></li>
</ul>
<h4 id="_24">文件定位<a class="headerlink" href="#_24" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<ul>
<li><code>int fseek(FILE *stream, long int offset, int whence)</code><ul>
<li><code>whence</code> 可以是 <code>SEEK_SET</code>、<code>SEEK_CUR</code>、<code>SEEK_END</code></li>
<li>第二个参数表示偏移量</li>
<li>将文件类比为数组，单位是字节数</li>
</ul>
</li>
<li><code>long int ftell(FILE *stream)</code><ul>
<li>距文件开始处的字节数</li>
</ul>
</li>
<li><code>void rewind(FILE *stream)</code></li>
</ul>
<h4 id="_25">其他<a class="headerlink" href="#_25" title="Permanent link"><span><span class="heti-spacing"> </span>¶</span></a></h4>
<p>以下两个函数用于处理更大型的文件（<code>long</code> 无法表示的偏移值）</p>
<ul>
<li><code>int fgetpos(FILE *stream, fpos_t *pos)</code></li>
<li><code>int fsetpos(FILE *stream, const fpos_t *pos)</code></li>
</ul>
<aside class="md-source-file">
<span class="md-source-file__fact">
<span class="md-icon" title="Last update">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 5, 2024</span>
</span>
<span class="md-source-file__fact">
<span class="md-icon" title="Contributors">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9 3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3 3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3 3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.54 5.54 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13zM0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9-.59.68-.95 1.62-.95 2.65V20zm24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65 2.56.34 4.45 1.51 4.45 2.9z"></path></svg>
</span>
<nav>
<a href="mailto:hyw-luv@zju.edu.cn">Starrism</a>, 
        <a href="mailto:zhubaolin228@gmail.com">bowling233</a>
</nav>
</span>
</aside>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: 课前：一些样例" class="md-footer__link md-footer__link--prev" href="../pre/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                课前：一些样例
              </div>
</div>
</a>
<a aria-label="Next: 简明 C 标准库" class="md-footer__link md-footer__link--next" href="../../lec4/lec4/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                简明 C 标准库
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
<p xmlns:cc="http://creativecommons.org/ns#">This work is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" rel="license noopener noreferrer" style="display:inline-block;" target="_blank">CC BY-NC-SA 4.0<img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"/><img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"/><img src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1" style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"/><img src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1" style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"/></a></p><p>Copyright © 2023 - 2024 CKC-AGC</p>
</div>
</div>
<div class="md-social">
<a class="md-social__link" href="https://space.bilibili.com/3546574332365752" rel="noopener" target="_blank" title="space.bilibili.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0q13.2 0 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0q13.2 0 21.9 8.603c5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1m-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8s9.7-14.3 10.1-23.5zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5s-17.5-3.2-23.6-9.5-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2s13.2-9.6 23.3-10c9.2.4 17 3.7 23.3 10m191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2s-14 9.5-23.6 9.5-17.4-3.2-23.6-9.5c-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2s14.1-9.6 23.3-10c9.2.4 17 3.7 23.3 10"></path></svg>
</a>
<a class="md-social__link" href="https://github.com/ckc-agc" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../../../..", "features": ["search.highlight", "navigation.expand", "navigation.footer", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "header.autohide", "content.code.copy", "content.code.annotate", "content.action.edit", "content.tabs.link"], "search": "../../../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../../../assets/javascripts/bundle.83f73b43.min.js"></script>
<script src="../../../../../javascripts/mathjax.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://jsd.onmicrosoft.cn/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>